<!DOCTYPE html>
<html>
<head>
  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>
  <script src="buttons.js"></script>
  <link rel="stylesheet" href="tweet.css">
</head>
<body>
  <script>
      $(document).ready(function(){
      var $body = $('body');
      $body.html('');

      var $button = $('<button id="tweet">NewTweets</button>')
      $button.appendTo($body);
      $('#tweet').click(function(){
        location.reload();
      });

      var r = [];
      var index = streams.home.length - 1;
      while(index >= 0){
        var tweet = streams.home[index];
        var $tweet = $('<div class="a"></div>');
        var time  = new Date().getHours()+":"+new Date().getMinutes()
        var words = '@' + tweet.user + ': ' + tweet.message+'\xa0\xa0\xa0\xa0\xa0'+'  Created at '+time
        $tweet.text(words);
        r.push(words)
        $tweet.appendTo($body);
        index -= 1;
      }

      
      var stream = streams.home;
      var $w = $('<div class="b">Click on the button for tweets</div>');
      // var$t = $('<table><tr><td id="tbl"></td></tr></table>');
      // var $w = $("#tbl")
      
      var getTweet = function(name){
        var t = []
        for(var i = 0; i < stream.length; i++){
          r.push( '@'+name+''+stream[i].message);
          if(stream[i].user === name){
            t.push( '@'+name+''+stream[i].message);
          }
        }
        for(var i = t.length-1; i>=0;i--){
          var $news = $('<div id="how">how</div>')
          $news.text(t[i])
          $news.appendTo($w);
        };


      };
      var showtweets = function(){
        var h = $('<div id="h">!!</div>')
        //var h = $('<table><tr><td id="tbl"></td></tr></table>')
        //location.reload()
        var randomIndex = Math.floor(Math.random()*r.length);
         h.text(r[randomIndex]);
         h.appendTo($body);
       
     };
     setInterval(function(){showtweets()},4000);
      //getTweet('mracus')
//getTweet('shawndrost')
var shawn = $('<button id="shawn">shawndrost</button>')
shawn.appendTo($body);
$("#shawn").on("click",function(){
  //reset();
  $w.html('')
  $w.html(getTweet('shawndrost'))
  
});
var sharksforcheap = $('<button id="sharksforcheap">sharksforcheap</button>')
sharksforcheap.appendTo($body);
$("#sharksforcheap").on("click",function(){
  $w.text('')
  getTweet('sharksforcheap')
});
var mracus = $('<button id="mracus"><span>mracus</span></button>')
mracus.appendTo($body);
$("#mracus").on("click",function(){
  $w.text('')
  getTweet('mracus')
});
var douglascalhoun = $('<button id="douglascalhoun">douglascalhoun</button>')
douglascalhoun.appendTo($body);
$("#douglascalhoun").on("click",function(){
  $w.text('')
  getTweet('douglascalhoun')
});
$w.appendTo($body);

var $visitor = $('<form id="vis"><input type="text" name="name" placeholder="yourname" required></input><input id="more" type="text" name="posttweet" placeholder="tweet"></input><input type="submit" value="submit"></input></form>')
$visitor.appendTo($body);
$("#vis").on("submit",function(e){
  e.preventDefault();
  $w.text($("#more")[0].value)
  reset()
})
function reset(){
  document.getElementsByTagName("input")[0].value=""
  $("#more")[0].value="";
};
});
    

</script>
</body>
</html>
